:root{--bg: #343541;--sidebar-bg: #202123;--message-bg-user: #343541;--message-bg-ai: #444654;--input-bg: #40414f;--text-primary: #ececf1;--text-secondary: #c5c5d2;--border: #565869;--button-bg: #19c37d;--button-hover: #1a7f5f;--button-text: #ffffff;--danger: #ff3b30;--danger-hover: #cc2e24;--danger-bg-soft: rgba(255, 59, 48, 0.2);--code-inline-bg: rgba(0, 0, 0, 0.3);--code-block-bg: #000000;--code-block-text: #e5e5e5;--scrollbar-thumb: rgba(255, 255, 255, 0.1);--scrollbar-thumb-hover: rgba(255, 255, 255, 0.2);--modal-overlay: rgba(0, 0, 0, 0.7);--modal-shadow: rgba(0, 0, 0, 0.4);--modal-shadow2: rgba(0, 0, 0, 0.04);--white: #ffffff;font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto","Helvetica", "Arial", sans-serif;}
*{box-sizing: border-box;margin: 0;padding: 0;}
html,body{height: 100%;margin: 0;background: var(--bg);color: var(--text-primary);overflow-x: hidden;overflow-y: hidden;}
body{position: relative;}

/*app.js*/
.app{height: 100vh;display: flex;flex-direction: column;transition: transform 0.3s ease;will-change: transform;}
body.sidebar-open .app{transform: translateX(280px);}
.chat-box{flex: 1;display: flex;flex-direction: column;overflow: hidden;}
.messages{flex: 1;overflow-y: auto;display: flex;flex-direction: column;}
.message{width: 100%;padding: 24px 0;display: flex;justify-content: center;}
.message.uer{background: var(--message-bg-user);}
.message.ai{background: var(--message-bg-ai);}
.message{width: 100%;padding: 12px 16px;display: flex;}
.message.user{justify-content: flex-end;}
.message.ai{justify-content: flex-start;}
.message > div{max-width: 70%;padding: 12px 16px;border-radius: 12px;}
.message.user > div{background-color: var(--modal-shadow2);border-bottom-right-radius: 4px;}
.message.ai > div{background-color: var(--modal-shadow2);border-bottom-left-radius: 4px;}
.message.user > div,
.message.ai > div{color: var(--text-primary);}
.message.ai{line-height: 1.75;}
.message.ai h1,
.message.ai h2,
.message.ai h3{margin-top: 1.5rem;margin-bottom: 0.5rem;font-weight: 600;color: var(--text-primary);}
.message.ai h1:first-child,
.message.ai h2:first-child,
.message.ai h3:first-child{margin-top: 0;}
.message.ai h1{font-size: 1.5rem;}
.message.ai h2{font-size: 1.25rem;}
.message.ai h3{font-size: 1.1rem;}
.message.ai p{margin-bottom: 1rem;color: var(--text-primary);}
.message.ai p:last-child{margin-bottom: 0;}
.message.ai ul,
.message.ai ol{margin: 0.5rem 0 1rem 0;padding-left: 1.5rem;}
.message.ai li{margin-bottom: 0.25rem;}
.message.ai code{background: var(--code-inline-bg);padding: 0.2em 0.4em;border-radius: 3px;font-family: "SÃ¶hne Mono", Monaco, "Courier New", monospace;font-size: 0.85em;color: var(--text-primary);}
.message.ai pre{background: var(--code-block-bg);color: var(--code-block-text);padding: 1rem;border-radius: 6px;overflow-x: auto;margin: 1rem 0;}
.message.ai pre code{background: none;padding: 0;color: inherit;font-size: 0.875rem;}
.message.ai strong{font-weight: 600;color: var(--text-primary);}
.message.ai em{font-style: italic;}
.meta{font-size: 0.75rem;color: var(--text-secondary);margin-top: 8px;opacity: 0.7;}
.input-form{padding: 12px;background: var(--bg);display: flex;gap: 8px;align-items: flex-end;width: 100%;margin-top: 0.5rem;border-top: 1px solid var(--border);}
.input-form select{padding: 16px 2px;border-radius: 6px;border: 1px solid var(--border);background: var(--input-bg);color: var(--text-primary);cursor: pointer;font-size: 0.875rem;flex-shrink: 0;width: 150px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;}
.input-form select:focus{outline: none;border-color: var(--text-secondary);}
.input-form select option{white-space: normal;}
.input-form textarea{flex: 1;padding: 12px 16px;border-radius: 6px;border: 1px solid var(--border);background: var(--input-bg);color: var(--text-primary);font-size: 1rem;font-family: inherit;resize: none;overflow-y: auto;min-height: 44px;max-height: 200px;line-height: 1.5;}
.input-form textarea::placeholder{color: var(--text-secondary);opacity: 0.6;}
.input-form textarea:focus{outline: none;border-color: var(--text-secondary);}
.input-form textarea::-webkit-scrollbar{width: 6px;}
.input-form textarea::-webkit-scrollbar-track{background: transparent;}
.input-form textarea::-webkit-scrollbar-thumb{background: var(--scrollbar-thumb-hover);border-radius: 3px;}
.input-form textarea::-webkit-scrollbar-thumb:hover{background: var(--scrollbar-thumb-hover);}
.input-form button{padding: 16px;border-radius: 6px;border: none;background: var(--button-bg);color: var(--button-text);cursor: pointer;font-weight: 600;font-size: 0.875rem;transition: background 0.2s ease;white-space: nowrap;flex-shrink: 0;}
.input-form button:hover{background: var(--button-hover);}
.input-form button:disabled{opacity: 0.5;cursor: not-allowed;}
.messages::-webkit-scrollbar{width: 8px;}
.messages::-webkit-scrollbar-track{background: transparent;}
.messages::-webkit-scrollbar-thumb{background: var(--scrollbar-thumb);border-radius: 0px;}
.messages::-webkit-scrollbar-thumb:hover{background: var(--scrollbar-thumb-hover);}
@media (max-width: 768px){.message > div{padding: 0 1rem;}
.input-form{flex-direction: column;padding: 12px;align-items: stretch;}
.input-form select{width: 100%;}
.input-form textarea{min-height: 44px;}}

/*sidebar.js*/
.sidebar{position: fixed;top: 0;left: 0;width: 280px;height: 100vh;background: var(--sidebar-bg);transform: translateX(-280px);transition: transform 0.3s ease;z-index: 1000;display: flex;flex-direction: column;border-right: 1px solid var(--border);}
body.sidebar-open .sidebar{transform: translateX(0);}
.sidebar-header{padding: 16px;border-bottom: 1px solid var(--border);}
.sidebar-header h2{font-size: 1rem;font-weight: 600;color: var(--text-primary);margin-bottom: 12px;}
.sidebar-footer{border-top: 1px solid var(--border);padding: 14px 20px;background: var(--sidebar-bg);}
.sidebar-user{font-weight: 500;font-size:14px;color: var(--text-secondary);word-break: break-word;}
.new-chat-btn{width: 100%;padding: 10px;background: var(--input-bg);border: 1px solid var(--border);border-radius: 6px;color: var(--text-primary);cursor: pointer;font-size: 0.875rem;font-weight: 500;transition: all 0.2s ease;margin-bottom: 12px;}
.new-chat-btn:hover{background: var(--message-bg-ai);}
.search-container{position: relative;width: 100%;}
.search-icon{position: absolute;left: 12px;top: 50%;transform: translateY(-50%);color: var(--text-primary);pointer-events: none;opacity: 0.7;z-index: 1;}
.search-icon svg{display: block;width: 16px;height: 16px;}
.search-input{width: 100%;padding: 10px 36px 10px 36px;background: var(--input-bg);border: 1px solid var(--border);border-radius: 6px;color: var(--text-primary);font-size: 0.875rem;transition: all 0.2s ease;}
.search-input::placeholder{color: var(--text-secondary);opacity: 0.6;}
.search-input:focus{outline: none;border-color: var(--text-secondary);background: var(--message-bg-ai);}
.clear-search-btn{position: absolute;right: 36px;top: 50%;transform: translateY(-50%);width: 24px;height: 24px;background: transparent;border: none;color: var(--text-secondary);font-size: 1.5rem;line-height: 1;cursor: pointer;border-radius: 4px;transition: all 0.2s ease;display: flex;align-items: center;justify-content: center;}
.clear-search-btn:hover{background: var(--danger-bg-soft);color: var(--danger);}
.conversation-list{flex: 1;overflow-y: auto;padding: 8px;}
.conversation-list::-webkit-scrollbar{width: 6px;}
.conversation-list::-webkit-scrollbar-track{background: transparent;}
.conversation-list::-webkit-scrollbar-thumb{background: var(--scrollbar-thumb);border-radius: 3px;}
.conversation-list::-webkit-scrollbar-thumb:hover{background: var(--scrollbar-thumb-hover);}
.conversation-item{min-height:3rem;position: relative;padding: 2px 12px;margin-bottom: 4px;background: var(--input-bg);border-radius: 6px;cursor: pointer;transition: all 0.2s ease;display: flex;align-items: center;gap: 8px;}
.conversation-item:hover{background: var(--message-bg-ai);}
.conversation-item.active{background: var(--message-bg-ai);border-left: 3px solid var(--button-bg);padding-left: 5px;}
.drag-handle{display: none;flex-shrink: 0;width: 16px;height: 16px;color: var(--text-secondary);cursor: grab;opacity: 0.5;transition: opacity 0.2s ease;}
.conversation-item:hover .drag-handle{display: flex;align-items: center;justify-content: center;}
.drag-handle:active{cursor: grabbing;}
.drag-handle:hover{opacity: 1;}
.conversation-item.dragging{opacity: 0.5;border: 2px dashed var(--button-bg);}
.conversation-item.drag-over{background: var(--drag-over-bg);border-top: 2px solid var(--button-bg);}
.conversation-preview{flex: 1;font-size: 0.875rem;color: var(--text-primary);white-space: nowrap;overflow: hidden;text-overflow: ellipsis;padding-right: 8px;cursor: pointer;}
.conversation-title-edit{flex: 1;padding: 4px 8px;background: var(--sidebar-bg);border: 1px solid var(--button-bg);border-radius: 4px;color: var(--text-primary);font-size: 0.875rem;font-family: inherit;}
.conversation-title-edit:focus{outline: none;border-color: var(--button-bg);box-shadow: 0 0 0 2px var(--button-hover);}
.conversation-actions{display: none;gap: 4px;align-items: center;flex-shrink: 0;}
.conversation-item:hover .conversation-actions{display: flex;}
.conversation-item.mobile .conversation-actions{display: flex;}
.conversation-item.mobile .drag-handle{display: flex !important;}
.edit-btn{display: flex;align-items: center;justify-content: center;width: 28px;height: 28px;background: transparent;border: none;color: var(--text-secondary);cursor: pointer;border-radius: 4px;transition: all 0.2s ease;padding: 0;}
.edit-btn:hover{background: var(--button-hover);color: var(--button-bg);}
.edit-btn svg{width: 16px;height: 16px;}
.delete-btn{display: flex;align-items: center;justify-content: center;width: 28px;height: 28px;background: transparent;border: none;color: var(--text-secondary);font-size: 1.5rem;line-height: 1;cursor: pointer;border-radius: 4px;transition: all 0.2s ease;flex-shrink: 0;}
.delete-btn:hover{background: var(--danger-bg-soft);color: var(--danger);}
.no-conversations{padding: 24px;text-align: center;color: var(--text-secondary);font-size: 0.875rem;}
.sidebar-toggle{position: fixed;top: 14px;left: 14px;width: 40px;height: 40px;background: var(--bg);border: 0.5px solid var(--border);border-radius: 8px;cursor: pointer;z-index: 1001;display: flex;align-items: center;justify-content: center;transition: transform 0.3s ease;}
.sidebar-toggle:hover{background: var(--message-bg-ai);}
body.sidebar-open .sidebar-toggle{transform: translateX(280px);}
.hamburger{width: 20px;height: 16px;display: flex;flex-direction: column;justify-content: space-between;}
.hamburger span{display: block;width: 100%;height: 2px;background: var(--text-primary);border-radius: 2px;transition: all 0.3s ease;}
.sidebar-toggle.open .hamburger span:nth-child(1){transform: translateY(7px) rotate(45deg);}
.sidebar-toggle.open .hamburger span:nth-child(2){opacity: 0;}
.sidebar-toggle.open .hamburger span:nth-child(3){transform: translateY(-7px) rotate(-45deg);}
.modal{display: none;position: fixed;top: 0;left: 0;width: 100%;height: 100%;background: var(--modal-overlay);z-index: 2000;align-items: center;justify-content: center;}
.modal.show{display: flex;}
.modal-content{background: var(--sidebar-bg);border: 1px solid var(--border);border-radius: 12px;padding: 24px;max-width: 400px;width: 90%;box-shadow: 0 4px 24px var(--modal-shadow);}
.modal-content h3{font-size: 1.25rem;font-weight: 600;color: var(--text-primary);margin-bottom: 12px;}
.modal-content p{font-size: 0.875rem;color: var(--text-secondary);margin-bottom: 24px;}
.modal-buttons{display: flex;gap: 12px;justify-content: flex-end;}
.modal-buttons button{padding: 10px 20px;border: none;border-radius: 6px;font-size: 0.875rem;font-weight: 600;cursor: pointer;transition: all 0.2s ease;}
.btn-delete{background: var(--danger);color: var(--white);}
.btn-delete:hover{background: var(--danger-hover);}
.btn-cancel{background: var(--input-bg);color: var(--text-primary);border: 1px solid var(--border);}
.btn-cancel:hover{background: var(--message-bg-ai);}
.drop-zone{padding: 12px;margin-top: 8px;background: var(--modal-shadow2);border: 2px dashed var(--scrollbar-thumb);border-radius: 6px;text-align: center;font-size: 12px;color: var(--text-secondary);transition: all 0.2s ease;}
.drop-zone.drag-over{background: var(--modal-shadow);border-color: var(--button-bg);color: var(--text-primary);transform: scale(1.02);}
@media (max-width: 768px){.sidebar{width: 260px;transform: translateX(-260px);}
body.sidebar-open .sidebar{transform: translateX(0);}
body.sidebar-open .app{transform: translateX(260px);}
body.sidebar-open .sidebar-toggle{transform: translateX(260px);}}

/*welcome.js*/
.welcome-message{position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);text-align: center;z-index: 1;animation: welcomeFadeIn 0.5s ease-out;}
.welcome-fade-out{animation: welcomeFadeOut 0.3s ease-out forwards;}
.welcome-content{display: flex;flex-direction: column;align-items: center;gap: 1rem;}
.welcome-greeting{font-size: 2.5rem;font-weight: 600;margin: 0;color: var(--button-bg);}
.welcome-subtext{font-size: 1.1rem;color: var(--text-secondary);margin: 0;font-weight: 400;}
.welcome-spinner{position: relative;width: 60px;height: 60px;margin-top: 0.5rem;}
.spinner-ring{position: absolute;width: 100%;height: 100%;border: 3px solid transparent;border-top-color: var(--button-bg);border-radius: 50%;animation: spin 1.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite;}
.spinner-ring:nth-child(2){width: 80%;height: 80%;top: 10%;left: 10%;border-top-color: var(--button-hover);animation-duration: 2s;animation-delay: -0.3s;}
.spinner-ring:nth-child(3){width: 60%;height: 60%;top: 20%;left: 20%;border-top-color: var(--text-secondary);animation-duration: 2.5s;animation-delay: -0.6s;}
@keyframes welcomeFadeIn{from{opacity: 0;transform: translate(-50%, -45%);}to{opacity: 1;transform: translate(-50%, -50%);}}
@keyframes welcomeFadeOut{from{opacity: 1;transform: translate(-50%, -50%);}to{opacity: 0;transform: translate(-50%, -55%);}}
@keyframes spin{0%{transform: rotate(0deg);}100%{transform: rotate(360deg);}}
@media (max-width: 768px){.welcome-greeting{font-size: 2rem;}
.welcome-subtext{font-size: 1rem;}
.welcome-spinner{width: 50px;height: 50px;}}

/*voice.js*/
.voice-input-wrapper{position: relative;display: flex;align-items: center;width: 100%;}
.voice-input-wrapper textarea,
.voice-input-wrapper input[type="text"]{flex: 1;padding-right: 45px;}
.voice-input-btn{position: absolute;right: 8px;bottom: 8px;width: 32px;height: 32px;border: none;background: transparent !important;cursor: pointer;display: flex;align-items: center;justify-content: center;border-radius: 4px;transition: background-color 0.2s ease, opacity 0.2s ease;padding: 0 !important;min-width: unset !important;z-index: 10;}
.voice-input-btn:hover{background-color: var(--scrollbar-thumb) !important;}
.voice-input-btn:active{opacity: 0.8;}
.voice-input-btn svg,
.voice-input-btn .mic-icon{display: block !important;color: var(--text-secondary);fill: none;stroke: currentColor;transition: color 0.2s ease;width: 20px;height: 20px;pointer-events: none;}
.voice-input-btn.listening{background-color: transparent !important;}
.voice-input-btn.listening svg,
.voice-input-btn.listening .mic-icon{color: var(--button-bg);animation: pulse 1.5s ease-in-out infinite;}
.voice-input-btn.hover-start svg,
.voice-input-btn.hover-start .mic-icon{color: var(--button-bg);}
.voice-input-btn.hover-stop svg,
.voice-input-btn.hover-stop .mic-icon{color: var(--danger);}
@keyframes pulse{0%, 100%{opacity: 1;}50%{opacity: 0.6;}}
.voice-input-btn:disabled{opacity: 0.3;cursor: not-allowed;background-color: transparent !important;}
.voice-input-btn:disabled:hover{background-color: transparent !important;}
.input-form .voice-input-wrapper textarea{padding-right: 50px;}
.search-container{position: relative;}
.search-container .voice-input-wrapper{width: 100%;}
.search-container .voice-input-wrapper .search-input{padding-right: 70px;}
.search-container .voice-input-btn{right: 4px;top: 50%;bottom: auto;transform: translateY(-50%);}
.search-container .clear-search-btn[style*="display: block"] ~ .voice-input-btn,
.search-container .clear-search-btn:not([style*="display: none"]) ~ .voice-input-btn{right: 35px;}
@media (max-width: 768px){.search-container .voice-input-btn{right: 6px;}.voice-input-btn{width: 28px;height: 28px;top: 50% !important;bottom: auto !important;transform: translateY(-50%) !important;}
.voice-input-btn svg,.voice-input-btn .mic-icon{width: 18px;height: 18px;}}
.voice-input-btn:focus{outline: 2px solid var(--button-bg);outline-offset: 2px;}
.voice-input-btn:focus:not(:focus-visible){outline: none;}
.voice-input-btn:focus-visible{outline: 2px solid var(--button-bg);outline-offset: 2px;}